databaseChangeLog:
- changeSet:
    id: 1582163015631-1
    author: admin
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: customer_pkey
            name: id
            type: BIGINT
        - column:
            constraints:
              nullable: false
            name: department
            type: VARCHAR(255)
        - column:
            name: first_name
            type: VARCHAR(255)
        - column:
            name: last_name
            type: VARCHAR(255)
        tableName: customer
- changeSet:
    id: 1582163015631-2
    author: admin
    changes:
    - createSequence:
        cacheSize: 1
        cycle: false
        dataType: bigint
        incrementBy: 1
        maxValue: 9223372036854775807
        minValue: 1
        sequenceName: hibernate_sequence
        startValue: 1
- changeSet:
    id: 1582163015631-3
    author: admin
    changes:
    - sql:
        comment: Add row policy on Customer
        dbms: postgesql
        endDelimiter: \nGO
        splitStatements: true
        sql: ALTER TABLE customer ENABLE ROW LEVEL SECURITY;
        stripComments: true
- changeSet:
    id: 1582163015631-4
    author: admin
    changes:
    - sql:
        comment: Enable row policy on Customer
        dbms: postgesql
        endDelimiter: \nGO
        splitStatements: true
        sql: CREATE POLICY customer_policy ON customer USING (department = CURRENT_USER);
        stripComments: true
